<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesti칩n de Campa침as Google Ads</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Hover effect for buttons */
        button:hover {
            background-color: #4B8BF5;
            transition: background-color 0.3s ease;
        }
        /* Tama침o m치s grande para las gr치ficas */
        .chart-container {
            max-width: 100%;
            height: 400px; /* Ajusta el tama침o seg칰n sea necesario */
        }
        canvas {
            width: 100% !important;
            height: 90% !important; /* Ajuste de tama침o */
        }
        /* Alineaci칩n a la derecha en la tabla */
        td, th {
            text-align: right;
            padding: 8px;
        }
        /* Alineaci칩n centrada para nombre y acciones */
        .centered {
            text-align: center;
        }
        /* Subir men칰 */
        .menu-container {
            position: sticky;
            top: 0;
            z-index: 10;
        }
    </style>
</head>
<body class="bg-gray-100 p-4">

    <!-- Men칰 de Navegaci칩n -->
    <div class="max-w-6xl mx-auto bg-white p-6 rounded-lg shadow-md menu-container">
        <h1 class="text-2xl font-bold text-gray-800">游늵 Gesti칩n de Campa침as Google Ads</h1>
        
        <nav class="mt-4">
            <ul class="grid grid-cols-2 md:grid-cols-6 gap-4">
                <li><button onclick="showSection('dashboard-container')" class="w-full p-3 bg-blue-500 text-white rounded">Dashboard</button></li>
                <li><button onclick="showSection('campaigns')" class="w-full p-3 bg-green-500 text-white rounded">Gesti칩n de Campa침as</button></li>
                <li><button onclick="showMessage()" class="w-full p-3 bg-yellow-500 text-white rounded">An치lisis de Palabras Clave</button></li>
                <li><button onclick="showMessage()" class="w-full p-3 bg-red-500 text-white rounded">Alertas Autom치ticas</button></li>
                <li><button onclick="showMessage()" class="w-full p-3 bg-purple-500 text-white rounded">Historial de cambios</button></li>
                <li><button onclick="showMessage()" class="w-full p-3 bg-indigo-500 text-white rounded">Reportes y Optimizaci칩n</button></li>
            </ul>
        </nav>
    </div>

    <!-- Instrucciones de Uso -->
    <div class="max-w-6xl mx-auto bg-white p-6 rounded-lg shadow-md mb-6">
        <h1 class="text-xl font-bold text-gray-800"><i class="fas fa-book-open text-teal-500"></i> Instrucciones de Uso</h1>
        <ul class="list-inside list-disc text-gray-800 mt-4">
            <li><strong>Dashboard:</strong> Muestra el resumen de rendimiento de las campa침as con gr치ficas de impresiones, clics, conversiones y costo por conversi칩n.</li>
            <li><strong>Gesti칩n de Campa침as:</strong> Aqu칤 puedes a침adir nuevas campa침as, editarlas o borrarlas. Los datos se guardan localmente en tu navegador.</li>
            <li><strong>An치lisis de Palabras Clave:</strong> Identifica las palabras clave que generan conversiones y detecta aquellas que gastan presupuesto sin resultados.</li>
            <li><strong>Alertas Autom치ticas:</strong> Recibir치s notificaciones cuando una campa침a est칠 gastando demasiado o tenga bajo rendimiento.</li>
            <li><strong>Historial de Cambios:</strong> Visualiza los cambios realizados en las campa침as y compara diferentes periodos de tiempo.</li>
            <li><strong>Reportes y Optimizaci칩n:</strong> Genera reportes detallados de rendimiento en PDF o Excel y recibe recomendaciones para optimizar las campa침as.</li>
        </ul>
    </div>

    <!-- Dashboard -->
    <div id="dashboard-container" class="max-w-6xl mx-auto bg-white p-6 rounded-lg shadow-md mt-6 hidden">
        <!-- Gr치ficas -->
        <div class="chart-container">
            <h2 class="text-xl font-bold text-gray-800">游늵 Dashboard de Campa침as</h2>
            <canvas id="chart-performance" class="mt-4"></canvas> <!-- Gr치fica con tama침o ajustado -->
        </div>
    </div>

    <!-- Gesti칩n de Campa침as -->
    <div id="campaigns" class="max-w-6xl mx-auto bg-white p-6 rounded-lg shadow-md mt-6 hidden">
        <h2 class="text-xl font-bold text-gray-800">游늷 Gesti칩n de Campa침as</h2>
        <button onclick="addCampaign()" class="mt-4 px-4 py-2 bg-blue-500 text-white rounded">A침adir Campa침a</button>
        <table class="mt-4 w-full border-collapse border border-gray-300">
            <thead>
                <tr class="bg-gray-200">
                    <th class="border p-2">Nombre</th>
                    <th class="border p-2">Impresiones</th>
                    <th class="border p-2">Clics</th>
                    <th class="border p-2">Conversiones</th>
                    <th class="border p-2">Costo/Conversi칩n</th>
                    <th class="border p-2">Acciones</th>
                </tr>
            </thead>
            <tbody id="campaign-list"></tbody>
        </table>
    </div>

    <script>
        // Abrir o crear la base de datos
        let db;
        const request = indexedDB.open("googleAdsDB", 1);
        
        request.onsuccess = function(event) {
            db = event.target.result;
            loadCampaigns();
        };

        request.onerror = function(event) {
            alert("Error al abrir la base de datos");
        };

        request.onupgradeneeded = function(event) {
            db = event.target.result;
            const objectStore = db.createObjectStore("campaigns", { keyPath: "id", autoIncrement: true });
            objectStore.createIndex("name", "name", { unique: false });
        };

        // Funci칩n para mostrar las secciones
        function showSection(sectionId) {
            document.querySelectorAll('div[id]').forEach(div => div.classList.add('hidden'));
            document.getElementById(sectionId).classList.remove('hidden');
            if (sectionId === 'dashboard-container') updateDashboard();
        }

        // Funci칩n para mostrar mensajes de disponibilidad futura
        function showMessage() {
            alert("La opci칩n estar치 disponible cuando se integre la API de Google Ads");
        }

        // Funci칩n para cargar campa침as desde IndexedDB
        function loadCampaigns() {
            const objectStore = db.transaction("campaigns").objectStore("campaigns");
            const request = objectStore.getAll();

            request.onsuccess = function(event) {
                const campaigns = event.target.result;
                const tbody = document.getElementById("campaign-list");
                tbody.innerHTML = "";

                campaigns.forEach(campaign => {
                    let row = document.createElement("tr");
                    row.innerHTML = `
                        <td class="border p-2 centered">${campaign.name}</td>
                        <td class="border p-2">${campaign.impressions}</td>
                        <td class="border p-2">${campaign.clicks}</td>
                        <td class="border p-2">${campaign.conversions}</td>
                        <td class="border p-2">${campaign.costPerConversion}</td>
                        <td class="border p-2 centered">
                            <button onclick="editCampaign(${campaign.id})" class="text-yellow-500"><i class="fas fa-edit"></i></button>
                            <button onclick="deleteCampaign(${campaign.id})" class="text-red-500 ml-2"><i class="fas fa-trash"></i></button>
                        </td>
                    `;
                    tbody.appendChild(row);
                });
            };
        }

        // Funci칩n para a침adir una campa침a
        function addCampaign() {
            let name = prompt("Nombre de la campa침a:");
            let impressions = prompt("N칰mero de impresiones:");
            let clicks = prompt("N칰mero de clics:");
            let conversions = prompt("N칰mero de conversiones:");
            let costPerConversion = prompt("Costo por conversi칩n:");

            if (name && impressions && clicks && conversions && costPerConversion) {
                const transaction = db.transaction("campaigns", "readwrite");
                const objectStore = transaction.objectStore("campaigns");
                const newCampaign = {
                    name: name,
                    impressions: parseInt(impressions),
                    clicks: parseInt(clicks),
                    conversions: parseInt(conversions),
                    costPerConversion: parseFloat(costPerConversion)
                };

                objectStore.add(newCampaign);
                transaction.oncomplete = function() {
                    loadCampaigns();
                };
            }
        }

        // Funci칩n para editar una campa침a
        function editCampaign(id) {
            const transaction = db.transaction("campaigns", "readwrite");
            const objectStore = transaction.objectStore("campaigns");
            const request = objectStore.get(id);

            request.onsuccess = function(event) {
                const campaign = event.target.result;
                const newName = prompt("Nombre de la campa침a:", campaign.name);
                const newImpressions = prompt("N칰mero de impresiones:", campaign.impressions);
                const newClicks = prompt("N칰mero de clics:", campaign.clicks);
                const newConversions = prompt("N칰mero de conversiones:", campaign.conversions);
                const newCostPerConversion = prompt("Costo por conversi칩n:", campaign.costPerConversion);

                if (newName && newImpressions && newClicks && newConversions && newCostPerConversion) {
                    campaign.name = newName;
                    campaign.impressions = parseInt(newImpressions);
                    campaign.clicks = parseInt(newClicks);
                    campaign.conversions = parseInt(newConversions);
                    campaign.costPerConversion = parseFloat(newCostPerConversion);

                    objectStore.put(campaign);
                    transaction.oncomplete = function() {
                        loadCampaigns();
                    };
                }
            };
        }

        // Funci칩n para borrar una campa침a
        function deleteCampaign(id) {
            const transaction = db.transaction("campaigns", "readwrite");
            const objectStore = transaction.objectStore("campaigns");
            objectStore.delete(id);

            transaction.oncomplete = function() {
                loadCampaigns();
            };
        }

        // Funci칩n para actualizar el Dashboard
        function updateDashboard() {
            const objectStore = db.transaction("campaigns").objectStore("campaigns");
            const request = objectStore.getAll();

            request.onsuccess = function(event) {
                let campaigns = event.target.result;
                let labels = campaigns.map(c => c.name);
                let impressions = campaigns.map(c => c.impressions);
                let clicks = campaigns.map(c => c.clicks);
                let conversions = campaigns.map(c => c.conversions);
                let costPerConversion = campaigns.map(c => c.costPerConversion);

                let ctx = document.getElementById("chart-performance").getContext("2d");
                new Chart(ctx, {
                    type: "bar",
                    data: {
                        labels: labels,
                        datasets: [
                            { label: "Impresiones", data: impressions, backgroundColor: "#FF9800" },
                            { label: "Clics", data: clicks, backgroundColor: "#4CAF50" },
                            { label: "Conversiones", data: conversions, backgroundColor: "#2196F3" },
                            { label: "Costo/Conversi칩n", data: costPerConversion, backgroundColor: "#9C27B0" }
                        ]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            datalabels: {
                                display: true, // Siempre mostrar los valores en las barras
                                color: '#fff',
                                align: 'center',
                                anchor: 'center'
                            }
                        }
                    }
                });
            };
        }
    </script>

</body>
</html>
